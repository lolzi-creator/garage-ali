module.exports = {

"[project]/.next-internal/server/app/api/cars/brands/route/actions.js [app-rsc] (server actions loader, ecmascript)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
}}),
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/stream [external] (stream, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}}),
"[externals]/http [external] (http, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("http", () => require("http"));

module.exports = mod;
}}),
"[externals]/url [external] (url, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("url", () => require("url"));

module.exports = mod;
}}),
"[externals]/punycode [external] (punycode, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("punycode", () => require("punycode"));

module.exports = mod;
}}),
"[externals]/https [external] (https, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("https", () => require("https"));

module.exports = mod;
}}),
"[externals]/zlib [external] (zlib, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}}),
"[externals]/events [external] (events, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("events", () => require("events"));

module.exports = mod;
}}),
"[externals]/net [external] (net, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("net", () => require("net"));

module.exports = mod;
}}),
"[externals]/tls [external] (tls, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("tls", () => require("tls"));

module.exports = mod;
}}),
"[externals]/crypto [external] (crypto, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}}),
"[externals]/buffer [external] (buffer, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("buffer", () => require("buffer"));

module.exports = mod;
}}),
"[project]/src/lib/supabase.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "supabase": (()=>supabase),
    "supabaseTyped": (()=>supabaseTyped)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$supabase$2f$supabase$2d$js$2f$dist$2f$module$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@supabase/supabase-js/dist/module/index.js [app-route] (ecmascript) <locals>");
;
const supabaseUrl = ("TURBOPACK compile-time value", "https://oltffqtelwbhkguhkizo.supabase.co");
const supabaseAnonKey = ("TURBOPACK compile-time value", "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9sdGZmcXRlbHdiaGtndWhraXpvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE1MzgyNTIsImV4cCI6MjA2NzExNDI1Mn0.w-saPLLiZaXrC8tJKn3Hmr_sLcjkWRdUlwJsCNkzbxE");
const supabase = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$supabase$2f$supabase$2d$js$2f$dist$2f$module$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["createClient"])(supabaseUrl, supabaseAnonKey);
const supabaseTyped = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$supabase$2f$supabase$2d$js$2f$dist$2f$module$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["createClient"])(supabaseUrl, supabaseAnonKey);
}}),
"[project]/src/lib/cars.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "CarService": (()=>CarService)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/supabase.ts [app-route] (ecmascript)");
;
// Transform database row (snake_case) to Car object (camelCase)
function transformDBRowToCar(dbRow) {
    return {
        id: dbRow.id,
        brand: dbRow.brand,
        model: dbRow.model,
        year: dbRow.year,
        price: dbRow.price,
        mileage: dbRow.mileage,
        fuelType: dbRow.fuel_type,
        transmission: dbRow.transmission,
        bodyType: dbRow.body_type,
        color: dbRow.color,
        doors: dbRow.doors,
        seats: dbRow.seats,
        power: dbRow.power,
        engine: dbRow.engine,
        features: dbRow.features || [],
        description: dbRow.description,
        images: dbRow.images || [],
        condition: dbRow.condition,
        firstRegistration: dbRow.first_registration,
        previousOwners: dbRow.previous_owners,
        inspection: dbRow.inspection,
        location: dbRow.location,
        contactPerson: dbRow.contact_person,
        isAvailable: dbRow.is_available,
        isFeatured: dbRow.is_featured,
        dateAdded: dbRow.date_added
    };
}
// Transform Car object (camelCase) to database format (snake_case)
function transformCarToDBRow(car) {
    return {
        id: car.id,
        brand: car.brand,
        model: car.model,
        year: car.year,
        price: car.price,
        mileage: car.mileage,
        fuel_type: car.fuelType,
        transmission: car.transmission,
        body_type: car.bodyType,
        color: car.color,
        doors: car.doors,
        seats: car.seats,
        power: car.power,
        engine: car.engine,
        features: car.features,
        description: car.description,
        images: car.images,
        condition: car.condition,
        first_registration: car.firstRegistration,
        previous_owners: car.previousOwners,
        inspection: car.inspection,
        location: car.location,
        contact_person: car.contactPerson,
        is_available: car.isAvailable,
        is_featured: car.isFeatured,
        date_added: car.dateAdded
    };
}
class CarService {
    // Get all cars
    static async getAllCars() {
        const { data, error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from('cars').select('*').eq('is_available', true).order('date_added', {
            ascending: false
        });
        if (error) {
            console.error('Error fetching cars:', error);
            throw new Error('Failed to fetch cars');
        }
        return data.map(transformDBRowToCar);
    }
    // Get car by ID
    static async getCarById(id) {
        const { data, error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from('cars').select('*').eq('id', id).eq('is_available', true).single();
        if (error) {
            if (error.code === 'PGRST116') {
                return null; // Car not found
            }
            console.error('Error fetching car:', error);
            throw new Error('Failed to fetch car');
        }
        return transformDBRowToCar(data);
    }
    // Get featured cars
    static async getFeaturedCars() {
        const { data, error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from('cars').select('*').eq('is_available', true).eq('is_featured', true).order('date_added', {
            ascending: false
        });
        if (error) {
            console.error('Error fetching featured cars:', error);
            throw new Error('Failed to fetch featured cars');
        }
        return data.map(transformDBRowToCar);
    }
    // Search and filter cars
    static async searchCars(filters) {
        let query = __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from('cars').select('*').eq('is_available', true);
        // Apply filters
        if (filters.brand) {
            query = query.eq('brand', filters.brand);
        }
        if (filters.priceMin !== undefined) {
            query = query.gte('price', filters.priceMin);
        }
        if (filters.priceMax !== undefined) {
            query = query.lte('price', filters.priceMax);
        }
        if (filters.yearMin !== undefined) {
            query = query.gte('year', filters.yearMin);
        }
        if (filters.yearMax !== undefined) {
            query = query.lte('year', filters.yearMax);
        }
        if (filters.mileageMax !== undefined) {
            query = query.lte('mileage', filters.mileageMax);
        }
        if (filters.powerMin !== undefined) {
            query = query.gte('power', filters.powerMin);
        }
        if (filters.powerMax !== undefined) {
            query = query.lte('power', filters.powerMax);
        }
        if (filters.fuelType) {
            query = query.eq('fuel_type', filters.fuelType);
        }
        if (filters.transmission) {
            query = query.eq('transmission', filters.transmission);
        }
        if (filters.bodyType) {
            query = query.eq('body_type', filters.bodyType);
        }
        query = query.order('date_added', {
            ascending: false
        });
        const { data, error } = await query;
        if (error) {
            console.error('Error searching cars:', error);
            throw new Error('Failed to search cars');
        }
        return data.map(transformDBRowToCar);
    }
    // Admin: Get all cars (including unavailable)
    static async getAllCarsAdmin() {
        const { data, error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from('cars').select('*').order('date_added', {
            ascending: false
        });
        if (error) {
            console.error('Error fetching cars for admin:', error);
            throw new Error('Failed to fetch cars');
        }
        return data.map(transformDBRowToCar);
    }
    // Admin: Create new car
    static async createCar(carData) {
        // Generate ID if not provided
        const id = `car-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
        const car = {
            ...carData,
            id,
            dateAdded: new Date().toISOString().split('T')[0],
            isAvailable: carData.isAvailable ?? true,
            isFeatured: carData.isFeatured ?? false,
            contactPerson: carData.contactPerson || 'Ali',
            location: carData.location || 'Lengnau'
        };
        const dbRow = transformCarToDBRow(car);
        const { data, error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from('cars').insert(dbRow).select().single();
        if (error) {
            console.error('Error creating car:', error);
            throw new Error('Failed to create car');
        }
        return transformDBRowToCar(data);
    }
    // Admin: Update car
    static async updateCar(id, carData) {
        const dbRow = transformCarToDBRow({
            ...carData,
            id
        });
        // Remove undefined values
        Object.keys(dbRow).forEach((key)=>{
            if (dbRow[key] === undefined) {
                delete dbRow[key];
            }
        });
        const { data, error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from('cars').update(dbRow).eq('id', id).select().single();
        if (error) {
            console.error('Error updating car:', error);
            throw new Error('Failed to update car');
        }
        return transformDBRowToCar(data);
    }
    // Admin: Delete car
    static async deleteCar(id) {
        const { error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from('cars').delete().eq('id', id);
        if (error) {
            console.error('Error deleting car:', error);
            throw new Error('Failed to delete car');
        }
    }
    // Get unique brands
    static async getCarBrands() {
        const { data, error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from('cars').select('brand').eq('is_available', true);
        if (error) {
            console.error('Error fetching car brands:', error);
            throw new Error('Failed to fetch car brands');
        }
        const brands = [
            ...new Set(data.map((item)=>item.brand))
        ].sort();
        return brands;
    }
}
}}),
"[project]/src/app/api/cars/brands/route.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "GET": (()=>GET)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$cars$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/cars.ts [app-route] (ecmascript)");
;
;
async function GET() {
    try {
        const brands = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$cars$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CarService"].getCarBrands();
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json(brands);
    } catch (error) {
        console.error('Error fetching car brands:', error);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: 'Failed to fetch car brands'
        }, {
            status: 500
        });
    }
}
}}),

};

//# sourceMappingURL=%5Broot-of-the-server%5D__3fd7b4bf._.js.map